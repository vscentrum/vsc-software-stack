easyblock = 'CMakeMake'

name = 'CPPE'
version = '0.3.3a0'

homepage = 'https://github.com/maxscheurer/cppe'
description = """CPPE is an open-source, light-weight C++ and Python library for Polarizable
Embedding (PE)1,2 calculations. It provides an easy-to-use API to implement PE
for ground-state self-consistent field (SCF) calculations and post-SCF methods.
A convenient Python interface is also available."""

toolchain = {'name': 'GCC', 'version': '12.3.0'}

source_urls = ['https://github.com/maxscheurer/cppe/archive/']
sources = ['v%(version)s.tar.gz']
checksums = ['6dc3f863b5b7ffd1c049bf06e5d148bfdd08fc1c1aa2f5a506f211022628e2c3']

builddependencies = [
    ('CMake', '3.26.3'),
    ('pybind11', '2.11.1'),
    ('Ninja', '1.11.1'),
]

dependencies = [
    ('Python', '3.11.3'),
    ('Python-bundle-PyPI', '2023.06'),
]

exts_defaultclass = 'PythonPackage'
exts_default_options = {
    'download_dep_fail': True,
    'use_pip': True,
}
exts_list = [
    ('scikit_build_core', '0.10.7', {
        'source_urls': [PYPI_SOURCE],
        'source_tmpl': SOURCE_PY3_WHL,
        'checksums': ['5e13ab7ca7c3c6dd019607c3a6f53cba67dade8757c4c4f75b459e2f90e4dbc3'],
    }),
    ('cppe', version, {
        'source_urls': ['https://github.com/maxscheurer/cppe/archive/'],
        'source_tmpl': 'v%(version)s.tar.gz',
        'checksums': checksums
    }),
]

modextrapaths = {'PYTHONPATH': 'lib/python%(pyshortver)s/site-packages'}

sanity_check_paths = {
    'files': [],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

moduleclass = 'chem'
