easyblock = 'PythonBundle'

name = 'napari-denoiseg'
version = '0.0.1'

homepage = 'https://juglab.github.io/napari-denoiseg/index.html'
description = """A napari plugin performing joint denoising and segmentation of microscopy images using DenoiSeg."""

toolchain = {'name': 'foss', 'version': '2023a'}

dependencies = [
    ('Python', '3.11.3'),
    ('napari', '0.4.18'),  # TODO `napari<=0.4.15`
    ('PyQtGraph', '0.13.7'),
    ('QtPy', '2.4.1'),
    ('TensorFlow', '2.13.0'),
    ('CSBDeep', '0.7.4'),
    ('n2v', '0.3.3'),
    ('numba', '0.58.1'),
    ('scikit-learn', '1.4.2'),
    ('n2v', '0.3.3'),
    ('autopep8', '2.2.0'),
]

use_pip = True
sanity_pip_check = True

exts_list = [
    ('napari-workflows', '0.2.10', {
        'checksums': ['d48f2020693b4b8c1dd639668a3b1588115beac8f19f42394fc241fc1672be12'],
    }),
    ('napari-tools-menu', '0.1.19', {
        'checksums': ['6b58ac45d7fe84bc5975e7a53142340d5d62beff9ade0f2f58d7a3a4a0a8e8f8'],
    }),
    ('magicgui', '0.8.2', {
        'source_tmpl': SOURCE_PY3_WHL,
        'checksums': ['23ad789a058e6f5b4c9f9c7b804cbb73633c2d44c5141a10b71fabcd4847ae2e'],
    }),
    ('napari_time_slicer', '0.5.0', {
        'source_tmpl': SOURCE_PY3_WHL,
        'checksums': ['6c7f53f762cb3410da097be43ba47b4f4213e89930a3ade3ec1c7c1beb9d605f'],
    }),
    # lower version to overwrite the installed version
    ('vispy', '0.9.6', {
        'checksums': ['212cd5b50824499bbce3e2d741aadacb79c0b771ac566f931c61355976028bcb'],
    }),
    # lower version to overwrite the installed version
    ('wrapt', '1.12.1', {
        'checksums': ['b62ffa81fb85f4332a4f609cab4ac40709470da05643a082ec1eb88e6d9b97d7'],
    }),
    ('denoiseg', '0.3.1', {
        'source_tmpl': SOURCE_WHL,
        'checksums': ['2f2b0d2dc694236da3725527a8e33e4c5101d33837fc271a83e184aac0adbdc5'],
    }),
    ('napari_denoiseg', '%(version)src2', {
        'source_tmpl': SOURCE_PY3_WHL,
        'checksums': ['a0f1aea3686d58b105c899debe06435fa154c6982705080a66475328b20d6a75'],
    }),
]

sanity_check_paths = {
    'files': [],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

moduleclass = 'vis'

# TODO
# napari-denoiseg 0.0.1rc2 has requirement napari<=0.4.15, but you have napari 0.4.18.
# napari 0.4.18 has requirement vispy<0.13,>=0.12.1, but you have vispy 0.9.6.
# # napari-denoiseg 0.0.1rc2 has requirement vispy<=0.9.6, but you have vispy 0.12.2.
